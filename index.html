<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Planning des matchs</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.8/main.min.css" rel="stylesheet">
  <style>
    .team-input { display: flex; gap: 10px; margin-bottom: 10px; }
    .calendar-container { display: none; margin-top: 20px; }
  </style>
</head>
<body class="bg-light p-4">

  <div class="container">
    <h1 class="mb-4">‚öΩ Planification des matchs (local)</h1>

    <!-- Formulaire d'ajout -->
    <div class="card p-3 mb-4 shadow">
      <h5>Ajouter un match</h5>
      <form id="matchForm">
        <div class="row mb-2">
          <div class="col-md-4">
            <input type="text" class="form-control" placeholder="üèÜ Comp√©tition" id="competition" required>
          </div>
          <div class="col-md-4">
            <input type="date" class="form-control" id="date" required>
          </div>
          <div class="col-md-4">
            <input type="time" class="form-control" id="time" required>
          </div>
        </div>
        <div class="team-input">
          <input type="text" class="form-control" placeholder="üè† √âquipe domicile" id="home" required>
          <input type="number" class="form-control" placeholder="Score" id="homeScore">
        </div>
        <div class="team-input">
          <input type="text" class="form-control" placeholder="üÜö √âquipe ext√©rieure" id="away" required>
          <input type="number" class="form-control" placeholder="Score" id="awayScore">
        </div>
        <button type="submit" class="btn btn-primary">Ajouter</button>
      </form>
    </div>

    <!-- Filtres -->
    <div class="d-flex justify-content-between mb-3">
      <select class="form-select w-auto" id="filterCompetition">
        <option value="">Toutes les comp√©titions</option>
      </select>
      <button class="btn btn-outline-secondary" id="toggleCalendar">üóìÔ∏è Vue calendrier</button>
    </div>

    <!-- Liste des matchs -->
    <div id="matchList" class="row g-3"></div>

    <!-- Calendrier -->
    <div id="calendar" class="calendar-container"></div>
  </div>

  <!-- JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.8/main.min.js"></script>
  <script>
    const form = document.getElementById('matchForm');
    const matchList = document.getElementById('matchList');
    const calendarEl = document.getElementById('calendar');
    const calendarBtn = document.getElementById('toggleCalendar');
    const filterCompetition = document.getElementById('filterCompetition');

    let matches = [];

    const calendar = new FullCalendar.Calendar(calendarEl, {
      initialView: 'dayGridMonth',
      locale: 'fr',
      events: []
    });

    calendar.render();

    form.addEventListener('submit', (e) => {
      e.preventDefault();

      const match = {
        id: Date.now(),
        competition: competition.value.trim(),
        date: date.value,
        time: time.value,
        home: home.value.trim(),
        away: away.value.trim(),
        homeScore: homeScore.value || null,
        awayScore: awayScore.value || null,
      };

      matches.push(match);
      form.reset();
      renderMatches();
      updateCalendar();
      updateFilterOptions();
    });

    filterCompetition.addEventListener('change', renderMatches);

    calendarBtn.addEventListener('click', () => {
      calendarEl.style.display = calendarEl.style.display === 'none' ? 'block' : 'none';
    });

    function renderMatches() {
      const selectedComp = filterCompetition.value;
      const filtered = matches
        .filter(m => !selectedComp || m.competition === selectedComp)
        .sort((a, b) => new Date(`${a.date}T${a.time}`) - new Date(`${b.date}T${b.time}`));

      matchList.innerHTML = filtered.map(m => `
        <div class="col-md-6">
          <div class="card p-3 shadow-sm">
            <h6 class="text-muted">${m.competition} ‚Äî ${m.date} √† ${m.time}</h6>
            <p><strong>${m.home}</strong> ${m.homeScore ?? "-"} - ${m.awayScore ?? "-"} <strong>${m.away}</strong></p>
          </div>
        </div>
      `).join('');
    }

    function updateCalendar() {
      calendar.removeAllEvents();
      matches.forEach(m => {
        calendar.addEvent({
          title: `${m.home} vs ${m.away} (${m.competition})`,
          start: `${m.date}T${m.time}`,
        });
      });
      calendar.render();
    }

    function updateFilterOptions() {
      const comps = Array.from(new Set(matches.map(m => m.competition))).sort();
      filterCompetition.innerHTML = `<option value="">Toutes les comp√©titions</option>` +
        comps.map(c => `<option value="${c}">${c}</option>`).join('');
    }
  </script>
</body>
</html>





